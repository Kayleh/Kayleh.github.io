<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Kayleh"><title>I/O model · Kayleh</title><meta name="description" content="I/O模型1. java.io下的字符流和字节流
1.1 字符流字符流更加的方便我们使用，一般字符都是由多个字节来形成的，若我们使用字节流传输，则还需要我们自己将其转换为字符，若我们直接使用字符流的话，这样就能直接读取与输出字符。

CharArrayReader：是基础的字符输入流，能从字符数组中"><meta name="keywords" content=""><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style-dark.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">Kayleh</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">活版印字</a></h1></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li><li><a href="/categories">Categories</a></li><li><a href="/tags">Tags</a></li><li><a href="/google8102e2f35ce9e391.html"></a></li><li><a href="/mainfest.json"></a></li><li><a href="/categories/categories.html"></a></li><li><a href="/about/index.html">about</a></li><li><a href="/link/index.html">友人帐</a></li><li class="soc"><a href="https://github.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="https://twitter.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter">&nbsp;</i></a><a href="https://www.instagram.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-instagram">&nbsp;</i></a><a href="https://kayleh.top/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="https://kayleh.top" rel="noopener noreferrer">Kayleh</a></p><span>visitors:<span id="busuanzi_value_site_pv"></span></span></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>I/O model</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2020-12-03</span><span class="meta-item"><i class="fa fa-comment-o"></i><span>&nbsp;</span><a href="/I-O%E6%A8%A1%E5%9E%8B/#comments">Comments</a></span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/network/" title="network" class="a-tag">network</a><span>&nbsp;</span></span></p><p class="post-abstract"></p><h1 id="I-O模型"><a href="#I-O模型" class="headerlink" title="I/O模型"></a>I/O模型</h1><h2 id="1-java-io下的字符流和字节流"><a href="#1-java-io下的字符流和字节流" class="headerlink" title="1. java.io下的字符流和字节流"></a>1. java.io下的字符流和字节流</h2><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/2020072015491941.png" alt="在这里插入图片描述"></p><h3 id="1-1-字符流"><a href="#1-1-字符流" class="headerlink" title="1.1 字符流"></a>1.1 字符流</h3><p>字符流更加的方便我们使用，一般字符都是由多个字节来形成的，若我们使用字节流传输，则还需要我们自己将其转换为字符，若我们直接使用字符流的话，这样就能直接读取与输出字符。<br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720154944172.png" alt="在这里插入图片描述"></p><ul><li><code>CharArrayReader</code>：是基础的字符输入流，能从字符数组中读取数据</li><li><code>StringReader</code>：从字符串输入流中读取数据</li><li>输出流同理</li></ul><h4 id="1-1-1-更高级的字符流"><a href="#1-1-1-更高级的字符流" class="headerlink" title="1.1.1 更高级的字符流"></a>1.1.1 更高级的字符流</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/2020072015514933.png" alt="在这里插入图片描述"></p><ul><li><code>BufferedReader</code>：附带缓存区的字符输入流，但是我们并不能直接实例化供我们使用，而是将我们已经创建的Reader字符流，传入进来，就像对它<code>升级</code>一样，多了更多的功能，比如该字符流就是提供了缓存区，这样加快了io的效率，不必重复读取原始数据源</li><li><code>FilterReader</code>：同样也是运用了<code>装饰模式</code>，它额外的功能能对字符流中的字符进行筛选等</li><li><code>InputStreamReader</code>：连接字节流与字符流的一个桥梁，将字节流转化为字符流，比较常用的就是FileReader</li></ul><h3 id="1-2-字节流"><a href="#1-2-字节流" class="headerlink" title="1.2 字节流"></a>1.2 字节流</h3><p>字节流则是对一个个字节进行读取<br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720155921778.png" alt="在这里插入图片描述"></p><ul><li><code>ByteArrayInputStream</code>：字节数组输入流，从字节数组中获取数据</li><li><code>FileInputStream</code>：文件输入流，从文件中获取数据</li><li>输出流同理</li></ul><h4 id="1-2-1-更高级的字节流"><a href="#1-2-1-更高级的字节流" class="headerlink" title="1.2.1 更高级的字节流"></a>1.2.1 更高级的字节流</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720160513951.png" alt="在这里插入图片描述"></p><ul><li><code>BufferedInputStream</code>：附带缓存区的字节输入流，它同样也是与BufferedReader一个原理，也需要传入进本的InputStream进行升级</li><li><code>DataInputStream与DataOutputStream</code>：这俩就比较有意思了，相辅相成，与java内置的<code>基本数据类型</code>相关，能够将其中的字节，利用一些方法，比如toLong或toInt等方法直接转换为java的基本数据类型</li></ul><hr><h2 id="2-装饰器模式"><a href="#2-装饰器模式" class="headerlink" title="2. 装饰器模式"></a>2. 装饰器模式</h2><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720161404658.png" alt="在这里插入图片描述"><br>我们刚刚看到的，在字符流中BufferedReader、InputStreamReader和FilterReader，字节流中的BufferedInputStream、DataInputStreamReader与DataOutputStream都运用到了装饰器模式，因为它们本身不能进行实例化，都需要传入基本的Reader或InputStream来进行<code>升级</code>，这里便体现的是装饰器模式。</p><hr><h2 id="3-Socket"><a href="#3-Socket" class="headerlink" title="3. Socket"></a>3. Socket</h2><ul><li>我们可以将Socket认为是<code>网络传输的端点</code>，它也是一种<code>数据源</code>，将特定的ip地址与端口号与其进行绑定，这样它就能够实现通信的功能，如下图中，服务器中的socket绑定了对应的ip与端口号，与客户端间进行通信<br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720162148571.png" alt="在这里插入图片描述"></li></ul><h3 id="3-1-通过Socket发送数据"><a href="#3-1-通过Socket发送数据" class="headerlink" title="3.1 通过Socket发送数据"></a>3.1 通过Socket发送数据</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720162300339.png" alt="在这里插入图片描述"></p><ol><li>创建Socket，绑定特定的ip地址与端口号</li><li>将Socket与网卡驱动程序绑定</li><li>通过Socket我们就能够发送数据了</li><li>网卡驱动程序对Socket数据进行读取</li></ol><h3 id="3-2-通过Socket读取数据"><a href="#3-2-通过Socket读取数据" class="headerlink" title="3.2 通过Socket读取数据"></a>3.2 通过Socket读取数据</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720162657547.png" alt="在这里插入图片描述"></p><ul><li>与发送数据类似，只不过是将这个过程反过来了</li></ul><ol><li>我们还是要先创建Socket</li><li>将Socket与网卡驱动程序进行绑定</li><li>Socket接收来自网卡驱动程序的数据</li><li>从Socket中读取数据</li></ol><hr><h2 id="4-同步异步与阻塞非阻塞的概念"><a href="#4-同步异步与阻塞非阻塞的概念" class="headerlink" title="4. 同步异步与阻塞非阻塞的概念"></a>4. 同步异步与阻塞非阻塞的概念</h2><p>它们有两两组合的四种不同的排列组合，同步与异步强调<code>通信机制</code>，通俗点儿说可以是关于反应者的概念；阻塞与非阻塞强调<code>调用状态</code>，我们可以将其理解为调用者或者请求发起者<br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720162901659.png" alt="在这里插入图片描述"></p><h3 id="4-1-同步（女孩）"><a href="#4-1-同步（女孩）" class="headerlink" title="4.1 同步（女孩）"></a>4.1 同步（女孩）</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720163148736.png" alt="在这里插入图片描述"><br>男孩向女孩表白，<code>女孩</code>立即对该事件进行思考、反应，这就是同步通信机制</p><h3 id="4-2-异步（女孩）"><a href="#4-2-异步（女孩）" class="headerlink" title="4.2 异步（女孩）"></a>4.2 异步（女孩）</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/2020072016333178.png" alt="在这里插入图片描述"><br>异步通信机制就是，女孩<code>不会</code>对男孩的请求立即响应，而是女孩先去考虑考虑，有结果了呢，我发短信给你</p><h3 id="4-3-阻塞（男孩）"><a href="#4-3-阻塞（男孩）" class="headerlink" title="4.3 阻塞（男孩）"></a>4.3 阻塞（男孩）</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720163448654.png" alt="在这里插入图片描述"><br>男孩是个瓜皮，自动对女孩表白了以后，茶不思饭不想，一直等待着女孩的回应，<code>不做其他的事情</code></p><h3 id="4-4-非阻塞（男孩）"><a href="#4-4-非阻塞（男孩）" class="headerlink" title="4.4 非阻塞（男孩）"></a>4.4 非阻塞（男孩）</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/2020072016354228.png" alt="在这里插入图片描述"><br>这种男生就比较厉害了，能够协调好生活和爱情，和女孩表白后，不对结果困惑，而是<code>该干啥还去干啥</code>，这就是非阻塞调用</p><h3 id="4-5-四种排列组合"><a href="#4-5-四种排列组合" class="headerlink" title="4.5 四种排列组合"></a>4.5 四种排列组合</h3><ol><li>同步阻塞<br>男孩表白后，女孩立即进行思考给出反应，男孩在该过程中傻等，不干别的</li><li>异步阻塞<br>男孩表白后，女孩溜了，回家去想怎么回应了，不立即思考，男孩傻等，不干别的</li><li>同步非阻塞<br>男孩表白后，男孩干别的去了，不等你回复，而女孩立即陷入了沉思，想着反应结果</li><li>异步非阻塞<br>两个人都比较想得开，男孩表白完，干别的去了，女孩也不立即考虑这件事情，等啥时候考虑好了，再发消息给男孩</li></ol><p><a href="https://www.cnblogs.com/linkenpark/p/12376343.html" target="_blank" rel="noopener">同步阻塞、同步非阻塞、异步阻塞、异步非阻塞</a></p><hr><h2 id="5-网络通信中的线程池"><a href="#5-网络通信中的线程池" class="headerlink" title="5. 网络通信中的线程池"></a>5. 网络通信中的线程池</h2><p>我们在处理高并发请求的时候，若采用如下方法，将会造成很大的资源浪费<br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720164448156.png" alt="在这里插入图片描述"></p><p>线程池的使用是为了避免这种情况，节省系统的资源</p><h3 id="5-1-java提供的线程池"><a href="#5-1-java提供的线程池" class="headerlink" title="5.1 java提供的线程池"></a>5.1 java提供的线程池</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720164855993.png" alt="在这里插入图片描述"><br>我们可以利用Runnable与Callable来创建任务，利用线程池中的线程去执行任务，最后获得结果</p><h3 id="5-2-java创建线程池的静态方法"><a href="#5-2-java创建线程池的静态方法" class="headerlink" title="5.2 java创建线程池的静态方法"></a>5.2 java创建线程池的静态方法</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/IO/I-O模型/20200720165057685.png" alt="在这里插入图片描述"></p><ul><li><code>newSingleThreadExecutor</code>：这个线程池中只有一个线程，我们对这一个线程进行不断的复用</li><li><code>newFixedThreadPool</code>：固定线程数量的线程池，当超过线程容量的时候，要进行等待</li><li><code>newCachedThreadPool</code>：这个线程池对多出的任务，还会创建出新的线程去对其进行执行</li><li><code>newScheduledThreadPool</code>：能够实现定时处理任务的线程池</li></ul><p></p></div><div class="share"><span>Share</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a href="http://twitter.com/home?status=https://kayleh.top/I-O模型/%20Kayleh%20I/O model" target="_blank" rel="noopener" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/BIO%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%9E%8B/" title="BIO blocking model"><i class="fa fa-angle-double-left"></i>&nbsp;Previous post: BIO blocking model</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="Java network programming">Next post: Java network programming&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname="kayleh",disqus_identifier="I-O模型/",disqus_title="I/O model",disqus_url="https://kayleh.top/I-O模型/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script id="dsq-count-scr" src="//kayleh.disqus.com/count.js" async></script></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="https://kayleh.top" rel="noopener noreferrer">Kayleh</a></p><span>visitors:<span id="busuanzi_value_site_pv"></span></span></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script><script src="/js/dao.js"></script><script src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/busuanzi/busuanzi.pure.mini.js"></script><script data-ad-client="ca-pub-7457165067653912" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></body></html>