<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Kayleh"><title>Spring、SpringMVC、Mybatis整合 · Kayleh</title><meta name="description" content="SSM整合

整合说明服务器开发分为三层,表现层、业务层、持久层表现层使用SpringMVC实现,业务程使用Spring实现,持久层使用Mybatis实现使用Spring框架来整合 SpringMVC和Mybatis框架这里使用xml配置文件+注解的方式进行搭建
最终目标最终实现通过前端页面对数据库"><meta name="keywords" content=""><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style-dark.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">Kayleh</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">活版印字</a></h1></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li><li><a href="/categories">Categories</a></li><li><a href="/tags">Tags</a></li><li><a href="/mainfest.json"></a></li><li><a href="/google8102e2f35ce9e391.html"></a></li><li><a href="/ToDoList/index.html">ToDoList</a></li><li><a href="/link/index.html">友情链接</a></li><li><a href="/about/index.html">about</a></li><li><a href="/friends/index.html">友人帐</a></li><li><a href="/categories/index.html">分类</a></li><li class="soc"><a href="https://github.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="https://twitter.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter">&nbsp;</i></a><a href="https://www.instagram.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-instagram">&nbsp;</i></a><a href="https://kayleh.top/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="https://kayleh.top" rel="noopener noreferrer">Kayleh</a></p><span>visitors:<span id="busuanzi_value_site_pv"></span></span></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>Spring、SpringMVC、Mybatis整合</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2020-04-20</span><span class="meta-item"><i class="fa fa-comment-o"></i><span>&nbsp;</span><a href="/Spring%E3%80%81SpringMVC%E3%80%81Mybatis%E6%95%B4%E5%90%88/#comments">Comments</a></span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/frame/" title="frame" class="a-tag">frame</a><span>&nbsp;</span></span></p><p class="post-abstract"></p><p>SSM整合</p><a id="more"></a><h3 id="整合说明"><a href="#整合说明" class="headerlink" title="整合说明"></a>整合说明</h3><p>服务器开发分为三层,表现层、业务层、持久层<br>表现层使用SpringMVC实现,业务程使用Spring实现,持久层使用Mybatis实现<br>使用Spring框架来整合 SpringMVC和Mybatis框架<br>这里使用xml配置文件+注解的方式进行搭建</p><h4 id="最终目标"><a href="#最终目标" class="headerlink" title="最终目标"></a>最终目标</h4><h5 id="最终实现通过前端页面对数据库进行查询和插入-实现用户的登录注册功能"><a href="#最终实现通过前端页面对数据库进行查询和插入-实现用户的登录注册功能" class="headerlink" title="最终实现通过前端页面对数据库进行查询和插入,实现用户的登录注册功能"></a>最终实现通过前端页面对数据库进行查询和插入,实现用户的登录注册功能</h5><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><h4 id="创建Maven工程"><a href="#创建Maven工程" class="headerlink" title="创建Maven工程"></a>创建Maven工程</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/start.png" alt></p><h5 id="选择webapp"><a href="#选择webapp" class="headerlink" title="选择webapp"></a>选择webapp</h5><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/new.png" alt><br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/3.png" alt></p><h5 id="数据库准备"><a href="#数据库准备" class="headerlink" title="数据库准备"></a>数据库准备</h5><pre class="line-numbers language-lang-sql"><code class="language-lang-sql">create database ssm;
use ssm;
create table account(
id int primary key auto_increment,
name varchar(20),
money double
);
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/data.png" alt></p><h4 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/root.png" alt></p><h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/deloy.png" alt></p><pre class="line-numbers language-lang-xml"><code class="language-lang-xml"><?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelversion>4.0.0</modelversion>
  <groupid>com.kayleh</groupid>
  <artifactid>SSM</artifactid>
  <version>1.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>SSM Maven Webapp</name>
  
  <url>http://www.example.com</url>

  
  <properties>
    <project.build.sourceencoding>UTF-8</project.build.sourceencoding>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
    <spring.version>5.0.2.RELEASE</spring.version>
    <slf4j.version>1.6.6</slf4j.version>
    <log4j.version>1.2.12</log4j.version>
    <mysql.version>5.1.6</mysql.version>
    <mybatis.version>3.4.5</mybatis.version>
  </properties>

  <dependencies>
    <dependency>
      <groupid>junit</groupid>
      <artifactid>junit</artifactid>
      <version>4.11</version>
      <scope>test</scope>
    </dependency>
    
    <dependency>
      <groupid>org.aspectj</groupid>
      <artifactid>aspectjweaver</artifactid>
      <version>1.6.8</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-aop</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-context</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-web</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-webmvc</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-test</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-tx</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>org.springframework</groupid>
      <artifactid>spring-jdbc</artifactid>
      <version>${spring.version}</version>
    </dependency>
    <dependency>
      <groupid>junit</groupid>
      <artifactid>junit</artifactid>
      <version>4.12</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupid>mysql</groupid>
      <artifactid>mysql-connector-java</artifactid>
      <version>${mysql.version}</version>
    </dependency>
    <dependency>
      <groupid>javax.servlet</groupid>
      <artifactid>servlet-api</artifactid>
      <version>2.5</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupid>javax.servlet.jsp</groupid>
      <artifactid>jsp-api</artifactid>
      <version>2.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupid>jstl</groupid>
      <artifactid>jstl</artifactid>
      <version>1.2</version>
    </dependency>
    
    <dependency>
      <groupid>log4j</groupid>
      <artifactid>log4j</artifactid>
      <version>${log4j.version}</version>
    </dependency>
    <dependency>
      <groupid>org.slf4j</groupid>
      <artifactid>slf4j-api</artifactid>
      <version>${slf4j.version}</version>
    </dependency>
    <dependency>
      <groupid>org.slf4j</groupid>
      <artifactid>slf4j-log4j12</artifactid>
      <version>${slf4j.version}</version>
    </dependency>
    
    <dependency>
      <groupid>org.mybatis</groupid>
      <artifactid>mybatis</artifactid>
      <version>${mybatis.version}</version>
    </dependency>
    <dependency>
      <groupid>org.mybatis</groupid>
      <artifactid>mybatis-spring</artifactid>
      <version>1.3.0</version>
    </dependency>
    <dependency>
      <groupid>c3p0</groupid>
      <artifactid>c3p0</artifactid>
      <version>0.9.1.2</version>
      <type>jar</type>
      <scope>compile</scope>
    </dependency>
  </dependencies>
  <build>
    <finalname>SSM</finalname>
    <pluginmanagement>
      <plugins>
        <plugin>
          <artifactid>maven-clean-plugin</artifactid>
          <version>3.1.0</version>
        </plugin>
        
        <plugin>
          <artifactid>maven-resources-plugin</artifactid>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactid>maven-compiler-plugin</artifactid>
          <version>3.8.0</version>
        </plugin>
        <plugin>
          <artifactid>maven-surefire-plugin</artifactid>
          <version>2.22.1</version>
        </plugin>
        <plugin>
          <artifactid>maven-war-plugin</artifactid>
          <version>3.2.2</version>
        </plugin>
        <plugin>
          <artifactid>maven-install-plugin</artifactid>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <artifactid>maven-deploy-plugin</artifactid>
          <version>2.8.2</version>
        </plugin>
      </plugins>
    </pluginmanagement>
  </build>
</project>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="编写实体类"><a href="#编写实体类" class="headerlink" title="编写实体类"></a>编写实体类</h4><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.domain;
import java.io.Serializable;
/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:06
 *
 * 账户
 */
public class Account implements Serializable {
    private Integer id;
    private String name;
    private Double money;
    public Integer getId() {
        return id;
    }
    .........
    public void setMoney(Double money) {
        this.money = money;
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="dao接口"><a href="#dao接口" class="headerlink" title="dao接口"></a>dao接口</h4><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.dao;
import com.kayleh.domain.Account;
import java.util.List;
/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:11
 * <p>
 * 账户dao接口
 */
public interface AccountDao {
    //查询所有账户
    public List<account> findAll();
    //保存账户信息
    public void saveAccount(Account account);
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></account></p></code></pre><h4 id="业务service层和实现"><a href="#业务service层和实现" class="headerlink" title="业务service层和实现"></a>业务service层和实现</h4><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.service;
import com.kayleh.domain.Account;
import java.util.List;
/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:16
 */
public interface AccountService {
    //查询所有账户
    public List<account> findAll();
    //保存账户信息
    public void saveAccount(Account account);
}
-----------------------------------------------------
package com.kayleh.service.impl;
import com.kayleh.domain.Account;
import com.kayleh.service.AccountService;
import org.springframework.stereotype.Service;
import java.util.List;
/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:18
 */
@Service("accountService")
public class AccountServiceImpl implements AccountService {
    public List<account> findAll() {
        System.out.println("业务层:查询所有账户...");
        return null;
    }
    public void saveAccount(Account account) {
        System.out.println("业务层:保存账户...");
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></account></account></code></pre><h2 id="Spring整合"><a href="#Spring整合" class="headerlink" title="Spring整合"></a>Spring整合</h2><p>在resource下创建Spring配置文件<br><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/Spring、SpringMVC、Mybatis整合/1.png" alt></p><h4 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h4><pre class="line-numbers language-lang-xml"><code class="language-lang-xml">       xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd">
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="注解扫描"><a href="#注解扫描" class="headerlink" title="注解扫描"></a>注解扫描</h4><pre class="line-numbers language-lang-xml"><code class="language-lang-xml">
    <context:component-scan base-package="com.kayleh">
        
        <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller">
    </context:component-scan>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.test;
import com.kayleh.service.AccountService;
import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:38
 */
public class TestSpring {
    @Test
    public void run1(){
        //加载配置文件
        ApplicationContext ac = new ClassPathXmlApplicationContext("classpath:applicationContext.xml");
        //获取对象
        AccountService as = (AccountService) ac.getBean("accountService");
        //调用方法
        as.findAll();
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="运行测试-成功调用accountService"><a href="#运行测试-成功调用accountService" class="headerlink" title="运行测试,成功调用accountService"></a>运行测试,成功调用accountService</h6><hr><h2 id="搭建和测试SpringMVC的开发环境"><a href="#搭建和测试SpringMVC的开发环境" class="headerlink" title="搭建和测试SpringMVC的开发环境"></a>搭建和测试SpringMVC的开发环境</h2><p>1.在web.xml中配置DispatcherServlet前端控制器</p><pre class="line-numbers language-lang-xml"><code class="language-lang-xml">
<servlet>
<servlet-name>dispatcherServlet</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

<init-param>
<param-name>contextConfigLocation</param-name>
<param-value>classpath:springmvc.xml</param-value>
</init-param>

<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>dispatcherServlet</servlet-name>
<url-pattern>/</url-pattern>
</servlet-mapping>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.在web.xml中配置DispatcherServlet过滤器解决中文乱码</p><pre class="line-numbers language-lang-xml"><code class="language-lang-xml">
<filter>
<filter-name>characterEncodingFilter</filter-name>
<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
<init-param>
<param-name>encoding</param-name>
<param-value>UTF-8</param-value>
</init-param>
</filter>
<filter-mapping>
<filter-name>characterEncodingFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.创建springmvc.xml的配置文件,编写配置文件</p><pre class="line-numbers language-lang-xml"><code class="language-lang-xml"><?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd">

    
    <context:component-scan base-package="com.kayleh">
        <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller">
    </context:component-scan>

    
    <bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/pages/">
        <property name="suffix" value=".jsp">
    </bean>

    
    <mvc:resources mapping="/CSS/**" location="/CSS/">
    <mvc:resources mapping="/images/**" location="/images/">
    <mvc:resources mapping="/js/**" location="/js/">
    
    <mvc:annotation-driven>
</beans>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>测试SpringMVC的框架搭建是否成功<br>1.编写index.jsp和list.jsp编写,超链接<br>自带的index.jsp没有头部信息，需要重新创建<pre class="line-numbers language-lang-xml"><code class="language-lang-xml"> <a href="account/findAll">查询所有</a>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>2.创建AccountController类,编写方法,进行测试</li></ol><pre class="line-numbers language-lang-java"><code class="language-lang-java">    package cn.kayleh.controller;
    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.RequestMapping;
    @Controller
    @RequestMapping("/account")
    public class AccountController {
    /**
    * 查询所有的数据
    * @return
    */
    @RequestMapping("/findAll")
    public String findAll() {
    System.out.println("表现层：查询所有账户...");
    return "list";
    }
    }
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Spring整合SpringMVC的框架"><a href="#Spring整合SpringMVC的框架" class="headerlink" title="Spring整合SpringMVC的框架"></a>Spring整合SpringMVC的框架</h2><ol><li>目的：在controller中能成功的调用service对象中的方法.</li><li>在项目启动的时候,就去加载applicationContext.xml的配置文件,在web.xml中配置ContextLoaderListener监听器（该监听器只能加载WEB-INF目录下的applicationContext.xml的配置文<br>件）。<pre class="line-numbers language-lang-xml"><code class="language-lang-xml">
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener
</listener-class></listener>

<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>classpath:applicationContext.xml</param-value>
</context-param>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ol><li>在controller中注入service对象,调用service对象的方法进行测试<br>```java<br>package cn.itcast.controller;<br>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.stereotype.Controller;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import cn.kayleh.service.AccountService;<br>@Controller<br>@RequestMapping(“/account”)<br>public class AccountController {<pre><code> @Autowired
 private AccountService accoutService;
</code></pre>/**</li></ol><ul><li>查询所有的数据</li><li>@return<br>*/<br>@RequestMapping(“/findAll”)<br>public String findAll() {<br>System.out.println(“表现层：查询所有账户…”);<br>accoutService.findAll();<br>return “list”;<br>}<br>}<br>```</li></ul><h2 id="Spring整合MyBatis框架"><a href="#Spring整合MyBatis框架" class="headerlink" title="Spring整合MyBatis框架"></a>Spring整合MyBatis框架</h2><h3 id="搭建和测试MyBatis的环境"><a href="#搭建和测试MyBatis的环境" class="headerlink" title="搭建和测试MyBatis的环境"></a>搭建和测试MyBatis的环境</h3><h6 id="在web项目中编写SqlMapConfig-xml的配置文件，编写核心配置文件-在后面整合进applicationContext-xml后可以删除"><a href="#在web项目中编写SqlMapConfig-xml的配置文件，编写核心配置文件-在后面整合进applicationContext-xml后可以删除" class="headerlink" title="在web项目中编写SqlMapConfig.xml的配置文件，编写核心配置文件,在后面整合进applicationContext.xml后可以删除"></a>在web项目中编写SqlMapConfig.xml的配置文件，编写核心配置文件,在后面整合进applicationContext.xml后可以删除</h6><pre class="line-numbers language-lang-xml"><code class="language-lang-xml"><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
<environments default>
<environment id="mysql">
<transactionmanager type="JDBC">
<datasource type="POOLED">
<property name="driver" value="com.mysql.jdbc.Driver">
<property name="url" value="jdbc:mysql:///ssm">
<property name="username" value="root">
<property name="password" value="admin">
</datasource>
</environment>
</environments>

<mappers>


<package name="cn.kayleh.dao">
</mappers>
</configuration>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="在AccountDao接口的方法上添加注解，编写SQL语句"><a href="#在AccountDao接口的方法上添加注解，编写SQL语句" class="headerlink" title="在AccountDao接口的方法上添加注解，编写SQL语句"></a>在AccountDao接口的方法上添加注解，编写SQL语句</h5><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.dao;

import com.kayleh.domain.Account;
import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Select;
import org.springframework.stereotype.Repository;

import java.util.List;

/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:11
 * <p>
 * 账户dao接口
 */

@Repository
public interface AccountDao {

    //查询所有账户
    @Select("select * from account")
    public List<account> findAll();

    //保存账户信息
    @Insert("insert into account(name,money) values (#{name},#{money})")
    public void saveAccount(Account account);
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></account></p></code></pre><h5 id="编写测试的方法"><a href="#编写测试的方法" class="headerlink" title="编写测试的方法"></a>编写测试的方法</h5><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.test;
import com.kayleh.service.AccountService;
import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:38
 */
public class TestSpring {
    @Test
    public void run1(){
        //加载配置文件
        ApplicationContext ac = new ClassPathXmlApplicationContext("classpath:applicationContext.xml");
        //获取对象
        AccountService as = (AccountService) ac.getBean("accountService");
        //调用方法
        as.findAll();
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Spring整合MyBatis框架-1"><a href="#Spring整合MyBatis框架-1" class="headerlink" title="Spring整合MyBatis框架"></a>Spring整合MyBatis框架</h2><h5 id="目的：把SqlMapConfig-xml配置文件中的内容配置到applicationContext-xml配置文件中"><a href="#目的：把SqlMapConfig-xml配置文件中的内容配置到applicationContext-xml配置文件中" class="headerlink" title="目的：把SqlMapConfig.xml配置文件中的内容配置到applicationContext.xml配置文件中"></a>目的：把SqlMapConfig.xml配置文件中的内容配置到applicationContext.xml配置文件中</h5><pre class="line-numbers language-lang-xml"><code class="language-lang-xml"> 
    
    

    <bean id="ds" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="com.mysql.jdbc.Driver">
        <property name="jdbcUrl" value="jdbc:mysql:///ssm">
        <property name="user" value="root">
        <property name="password" value="admin">
    </bean>

    
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="ds">
    </bean>

    
    <bean id="mapperScannerConfigurer" class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.kayleh.dao">
    </bean>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="在AccountDao接口中添加-Repository注解"><a href="#在AccountDao接口中添加-Repository注解" class="headerlink" title="在AccountDao接口中添加@Repository注解"></a>在AccountDao接口中添加@Repository注解</h5><h5 id="在service中注入dao对象，进行测试"><a href="#在service中注入dao对象，进行测试" class="headerlink" title="在service中注入dao对象，进行测试"></a>在service中注入dao对象，进行测试</h5><pre class="line-numbers language-lang-java"><code class="language-lang-java">package com.kayleh.dao;

import com.kayleh.domain.Account;
import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Select;
import org.springframework.stereotype.Repository;

import java.util.List;

/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:11
 * <p>
 * 账户dao接口
 */

@Repository
public interface AccountDao {

    //查询所有账户
    @Select("select * from account")
    public List<account> findAll();

    //保存账户信息
    @Insert("insert into account(name,money) values (#{name},#{money})")
    public void saveAccount(Account account);
}

-------------------------------------------------------------
package com.kayleh.service.impl;

import com.kayleh.dao.AccountDao;
import com.kayleh.domain.Account;
import com.kayleh.service.AccountService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:18
 */

@Service("accountService")
public class AccountServiceImpl implements AccountService {

    @Autowired
    private AccountDao accountDao;

    public List<account> findAll() {
        System.out.println("业务层:查询所有账户...");
        return accountDao.findAll();
    }

    public void saveAccount(Account account) {
        System.out.println("业务层:保存账户...");
        accountDao.saveAccount(account);
    }
}

-------------------------------------------------------------
package com.kayleh.controller;

import com.kayleh.domain.Account;
import com.kayleh.service.AccountService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.xml.ws.RequestWrapper;
import java.io.IOException;
import java.util.List;

/**
 * @Author: Wizard
 * @Date: 2020/4/21 9:21
 * <p>
 * 用户web层
 */

@Controller
@RequestMapping("/account")
public class AccountController {

    @Autowired
    private AccountService accountService;

    @RequestMapping("/findAll")
    public String findAll(Model model) {
        System.out.println("表现层:查询所有的账户...");

        List<account> list = accountService.findAll();

        model.addAttribute("list", list);

        return "list";
    }
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></account></p></account></account></p></code></pre><h5 id="配置Spring的声明式事务管理"><a href="#配置Spring的声明式事务管理" class="headerlink" title="配置Spring的声明式事务管理"></a>配置Spring的声明式事务管理</h5><pre class="line-numbers language-lang-xml"><code class="language-lang-xml">applicationContext.xml
 
    
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="ds">
    </bean>

    
    <tx:advice id="txAdvice" transaction-manager="transactionManager">
        <tx:attributes>
            <tx:method name="find*" read-only="true">
            <tx:method name="*" isolation="DEFAULT">
        </tx:attributes>
    </tx:advice>

    
    <aop:config>
        <aop:advisor advice-ref="txAdvice" pointcut="execution(* com.kayleh.service.impl.*ServiceImpl.*(..))">

    </aop:config>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-lang-java"><code class="language-lang-java">/**
     * 保存
     *
     * @param account
     * @return
     */
    @RequestMapping("/save")
    public void save(Account account, HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println("表现层:查询所有的账户...");

        accountService.saveAccount(account);

        response.sendRedirect(request.getContextPath() + "/account/findAll");
        return;
    }
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p></div><div class="share"><span>Share</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a href="http://twitter.com/home?status=https://kayleh.top/Spring、SpringMVC、Mybatis整合/%20Kayleh%20Spring、SpringMVC、Mybatis整合" target="_blank" rel="noopener" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/" title="dynamic-array"><i class="fa fa-angle-double-left"></i>&nbsp;Previous post: dynamic-array</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/%E5%9B%9E%E6%96%87%E6%95%B0/" title="palindrome">Next post: palindrome&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname="kayleh",disqus_identifier="Spring、SpringMVC、Mybatis整合/",disqus_title="Spring、SpringMVC、Mybatis整合",disqus_url="https://kayleh.top/Spring、SpringMVC、Mybatis整合/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script id="dsq-count-scr" src="//kayleh.disqus.com/count.js" async></script></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="https://kayleh.top" rel="noopener noreferrer">Kayleh</a></p><span>visitors:<span id="busuanzi_value_site_pv"></span></span></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script><script src="/js/dao.js"></script><script src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/busuanzi/busuanzi.pure.mini.js"></script><script data-ad-client="ca-pub-7457165067653912" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></body></html>