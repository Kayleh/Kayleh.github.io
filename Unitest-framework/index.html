<!DOCTYPE html><!--[if IEMobile 7 ]><html class="no-js iem7" lang="zh-CN"><![endif]--><!--[if lt IE 9]><html class="no-js lte-ie8" lang="zh-CN"><![endif]--><!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="zh-CN"><!--<![endif]--><head><meta charset="UTF-8"><title>Unitest framework</title><meta name="author" content="Kayleh"><link rel="shortcut icon" href="/images/favicon.png"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1"><link rel="canonical" href="https://kayleh.top/Unitest-framework/"><link rel="alternate" href="/atom.xml" type="application/atom+xml"><script src="/js/modernizr-2.0.js"></script><script src="/js/jquery-1.9.1.js"></script><script>window.twttr=function(t,e,r){var n,i=t.getElementsByTagName(e)[0],w=window.twttr||{};return t.getElementById(r)||((n=t.createElement(e)).id=r,n.src="https://platform.twitter.com/widgets.js",i.parentNode.insertBefore(n,i),w._e=[],w.ready=function(t){w._e.push(t)}),w}(document,"script","twitter-wjs")</script><link rel="me" href="https://twitter.com/y40jinqing"><script src="/js/octo.js"></script><link rel="stylesheet" href="/css/octo.css"><link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"><script data-ad-client="ca-pub-7457165067653912" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2cd1dc193190f18fed292accb735c684";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 4.2.0"></head><body><header role="banner"><hgroup><h1><a href="/">Kayleh</a></h1></hgroup></header><nav role="navigation"><ul class="subscription" data-subscription="rss"><li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li></ul><form action="https://google.com/search" method="get"><fieldset role="search"><input type="hidden" name="q" value="site:https://kayleh.top/"> <input class="search" type="text" name="q" results="0" placeholder="Search"></fieldset></form><ul class="main-navigation"><li><a href="/">Blog</a></li><li><a href="/archives">Archives</a></li><li><a href="/about/">about me</a></li><li><a href="/tags/">tag</a></li><li><a href="/link/">friends</a></li></ul></nav><div id="main"><div id="content"><div><article class="hentry" role="article"><header><h1 class="entry-title">Unitest framework</h1><p class="meta"><time datetime="2021-02-12T16:00:57.000Z" data-updated="true">Sat Feb 13 2021</time></p></header><div class="entry-content"><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613147342997.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613147496034.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613149415607.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613149552674.png" alt></p><h4 id="多条测试用例"><a href="#多条测试用例" class="headerlink" title="多条测试用例"></a>多条测试用例</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613149845499.png" alt></p><h4 id="注解方法"><a href="#注解方法" class="headerlink" title="注解方法"></a>注解方法</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613199579426.png" alt="1613199579426"></p><h4 id="五个方法"><a href="#五个方法" class="headerlink" title="五个方法"></a>五个方法</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613199693463.png" alt="1613199693463"></p><h4 id="测试用例testcase"><a href="#测试用例testcase" class="headerlink" title="测试用例testcase"></a>测试用例testcase</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613201703588.png" alt="1613201703588"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613202112317.png" alt="1613202112317"></p><h4 id="测试集合testsuite"><a href="#测试集合testsuite" class="headerlink" title="测试集合testsuite"></a>测试集合testsuite</h4><h5 id="追加单个测试对象"><a href="#追加单个测试对象" class="headerlink" title="追加单个测试对象"></a>追加单个测试对象</h5><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613207825662.png" alt="1613207825662"></p><blockquote><p>print(re.__dict__)</p></blockquote><h5 id="追加多个测试对象"><a href="#追加多个测试对象" class="headerlink" title="追加多个测试对象"></a>追加多个测试对象</h5><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613209390861.png" alt="1613209390861"></p><h4 id="TestLoder"><a href="#TestLoder" class="headerlink" title="TestLoder"></a>TestLoder</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613231860846.png" alt="1613231860846"></p><p>第一个参数path：指定存放测试用例的目录（单元测试用例，用unittest框架写的测试用例）</p><p>第二个参数pattern：指定匹配规则</p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613233980464.png" alt="1613233980464"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613234000816.png" alt="1613234000816"></p><h4 id="TestRunner"><a href="#TestRunner" class="headerlink" title="TestRunner"></a>TestRunner</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613318481043.png" alt="1613318481043"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613319975732.png" alt="1613319975732"></p><h5 id="状态1"><a href="#状态1" class="headerlink" title="状态1"></a>状态1</h5><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613320910898.png" alt="1613320910898"></p><h5 id="状态2（大于1即可）详细报告"><a href="#状态2（大于1即可）详细报告" class="headerlink" title="状态2（大于1即可）详细报告"></a>状态2（大于1即可）详细报告</h5><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613320887518.png" alt="1613320887518"></p><h5><a href="#" class="headerlink"></a><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613321695363.png" alt="1613321695363"></h5><h5 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h5><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613382483121.png" alt="1613382483121"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mymath</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jia</span><span class="params">(self,a,b)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jian</span><span class="params">(self,a,b)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> a-b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">changfa</span><span class="params">(self,a,b)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> b==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"error"</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> a/b</span><br><span class="line"></span><br><span class="line"><span class="comment">#代码功能验证</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    mm = mymath()</span><br><span class="line">    actualValue = m.jia(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    expectValue = <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> actualValue==expectValue:</span><br><span class="line">        print(<span class="string">"加法功能实现正确"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        actualValue==mm.jia(<span class="string">"a"</span>,<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">"该方法功能实现正确"</span>，e)</span><br><span class="line">-----------------------------------------------------------</span><br><span class="line"><span class="comment">#导包</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> myMath <span class="keyword">import</span> mymath</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建单元测试类(继承自unittest.testcase)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myMathTest</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#测试用例资源初始化方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.mm = mymath()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#测试用例方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_add_1</span><span class="params">(self)</span>:</span></span><br><span class="line">        actualValue = self.mm.jia(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">        expectValue = <span class="number">3</span></span><br><span class="line">        <span class="comment">#断言</span></span><br><span class="line">        self.assertEqual(actualValue,expectValue,<span class="string">"预期结果不一致"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_add_2</span><span class="params">(self)</span>:</span></span><br><span class="line">        actualValue = self.mm.jia(<span class="string">"abc"</span>,<span class="string">"def"</span>)</span><br><span class="line">        expectValue = <span class="string">"abcdef"</span></span><br><span class="line">        self.assertEqual(actualValue,expectValue,<span class="string">"预期结果不一致"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_floor_1</span><span class="params">(self)</span>:</span></span><br><span class="line">        actualValue = self.mm.chufa(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">        expectValue = <span class="string">"abcdef"</span></span><br><span class="line">        self.assertEqual(actualValue,expectValue,<span class="string">"预期结果不一致"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#测试用例的资源释放</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment">#unittest.main()</span></span><br><span class="line">    <span class="comment">#直接使用discover</span></span><br><span class="line">    discover=unittest.defaultTestLoader.discover(<span class="string">r"./20200408/"</span>,pattern=<span class="string">"myMathTest.py"</span>)</span><br><span class="line">    <span class="comment">#使用runner运行器运行测试集  "a"追加模式</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r"./20200408/re.txt"</span>,<span class="string">"a"</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        runner=unittest.TextTestRunner(f,description=<span class="string">"用于测试math类的用例执行"</span>,verbosity=<span class="number">2</span>)</span><br><span class="line">        runner.run(discover)</span><br></pre></td></tr></table></figure><p>maintest.py</p><blockquote><p>主测试文件,不是用来写测试用的,而是用来组织测试用来执行的</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613396353835.png" alt="1613396353835"></p><h3 id="HTML测试文档"><a href="#HTML测试文档" class="headerlink" title="HTML测试文档"></a>HTML测试文档</h3><h5 id="HTMLTestRunner模块"><a href="#HTMLTestRunner模块" class="headerlink" title="HTMLTestRunner模块"></a>HTMLTestRunner模块</h5><p>安装HTMLTestRunner.py到python的安装目录下/lib中</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install html-TestRunner</span><br></pre></td></tr></table></figure><h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> HTMLTestRunner <span class="keyword">import</span> HTMLTestRunner</span><br><span class="line"></span><br><span class="line"><span class="comment">#path=os.path.dirname(__file__)当前目录</span></span><br><span class="line">path=os.path.dirname(__file__)+<span class="string">r"/"</span></span><br><span class="line">filename=time.strname(<span class="string">"%Y-%m-%d-%H-%M-%S"</span>) + <span class="string">r".html"</span></span><br><span class="line">filename = path + filename</span><br><span class="line"><span class="comment">#修改代码</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">r"./20200408/result.html"</span>,<span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">	runner=unittest.HTMLTestRunner(f,verbosity=<span class="number">2</span>,title=<span class="string">"单元测试报告"</span>,description=<span class="string">"第一次运行的结果"</span>)</span><br><span class="line">	runner.run(discover)</span><br></pre></td></tr></table></figure><p>注释</p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613572049278.png" alt="1613572049278"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613572027235.png" alt="1613572027235"></p><h3 id="邮件自动化"><a href="#邮件自动化" class="headerlink" title="邮件自动化"></a>邮件自动化</h3><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613574779605.png" alt="1613574779605"></p><h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>项目目录结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---public(模块,例如注册,登录,退出)</span><br><span class="line">---test_cases(测试用例)</span><br><span class="line">---test_datas(测试数据,例如csv文件)</span><br><span class="line">---test_report(测试报告)</span><br></pre></td></tr></table></figure><p>电商系统/public/loginModule.py</p><blockquote><p>登录模块</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">very_login</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self,driver)</span>:</span></span><br><span class="line">        self.driver=driver</span><br><span class="line">        self.driver.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">        self.driver.get(<span class="string">"http://localhost/verydows/"</span>)</span><br><span class="line">        <span class="comment">#点击登录</span></span><br><span class="line">        self.driver.find_element_by_link_text(<span class="string">"登录"</span>).click()</span><br><span class="line">        <span class="comment">#输入用户名密码</span></span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">'//*[@id="username"]'</span>).send_keys(<span class="string">"kayleh"</span>)</span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">'//*[@id="password"]'</span>).send_keys(<span class="string">"123456"</span>)</span><br><span class="line">        <span class="comment">#点击登录按钮</span></span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">'//*[@id="login-form"]/div/a'</span>).click()</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">       </span><br><span class="line">    <span class="comment">#退出登录</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">logout</span><span class="params">(self,driver)</span>:</span></span><br><span class="line">        self.driver=driver</span><br><span class="line">        ele=self.driver.find_element_by_xpath(<span class="string">'//*[@id="top-userbar"]/a'</span>)</span><br><span class="line">        ActionChains(self.driver).move_to_element(ele).perform()</span><br><span class="line">        self.driver.find_element_by_link_text(<span class="string">"退出"</span>).click()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#退出浏览器对象</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quitB</span><span class="params">(self,driver)</span>:</span></span><br><span class="line">        self.driver=driver</span><br><span class="line">        self.driver.quit()</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    driver=webdriver.Chrome()</span><br></pre></td></tr></table></figure><p>电商系统/testcases/verydows_user_update.py</p><blockquote><p>更新用户信息</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment">#os.path.dirname(os.path.dirname(__file__))是这个文件的目录的上一级目录(电商系统)</span></span><br><span class="line">path=os.path.dirname(os.path.dirname(__file__))+<span class="string">r"/public"</span></span><br><span class="line"><span class="comment">#添加到环境变量</span></span><br><span class="line">path1=sys.path</span><br><span class="line">path1.append(path)</span><br><span class="line"><span class="keyword">from</span> loginModule <span class="keyword">import</span> very_login</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">verydows_user_update</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.ll = very_login()</span><br><span class="line">        self.driver=webdriver.Chrome()</span><br><span class="line">        self.ll.login(self.driver)</span><br><span class="line">       </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_user_01</span><span class="params">(self)</span>:</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">''</span>).click()</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">''</span>).clear()</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">''</span>).send_keys(<span class="string">"petter"</span>)</span><br><span class="line">    	time.sleep(<span class="number">2</span>)</span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">''</span>).clear()</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        <span class="comment">#修改完验证</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.ll.logout(self.driver)</span><br><span class="line">        self.ll.quitB(self.driver)</span><br><span class="line">    	actualValue=self.driver.find_element_by_xpath(<span class="string">''</span>).get_attribute(<span class="string">"value"</span>)</span><br><span class="line">        expectValue=<span class="string">"peter"</span></span><br><span class="line">        self.assertEqual(actualValue,expectValue)</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p>电商系统/testcases/verydows_reg_true.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">filename = os.path.dirname(os.path.dirname(__file__))+<span class="string">r"/test_datas/data_csv.csv"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">verydows_reg_true</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_reg_01</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">with</span> open(filename,<span class="string">"r"</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data=csv.reader(f)</span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">                driver.get(<span class="string">"http://localhost/verydows/"</span>)</span><br><span class="line">                driver.find_element_by_link_text(<span class="string">"免费注册"</span>).click()</span><br><span class="line">                driver.find_element_by_id(<span class="string">"username"</span>).send_keys(d[<span class="number">0</span>])</span><br><span class="line">                driver.find_element_by_id(<span class="string">"email"</span>).send_keys(d[<span class="number">1</span>])</span><br><span class="line">                driver.find_element_by_id(<span class="string">"password"</span>).send_keys(d[<span class="number">2</span>])</span><br><span class="line">                driver.find_element_by_id(<span class="string">"repassword"</span>).send_keys(d[<span class="number">3</span>])</span><br><span class="line">                driver.find_element_by_link_text(<span class="string">"立即注册"</span>).click()</span><br><span class="line">                </span><br><span class="line">                <span class="comment">#因为有一个中间页面的跳转，此处要强制等待一下，让他跳转过去</span></span><br><span class="line">                time.sleep(<span class="number">2</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment">#断言</span></span><br><span class="line">                <span class="comment">#expectUrl="http://localhost/verydows/index.php?c=user&amp;a=index"</span></span><br><span class="line">                <span class="comment">#actualUrl=driver.current_url</span></span><br><span class="line">                </span><br><span class="line">                expectValue=d[<span class="number">4</span>]</span><br><span class="line">                actualValue=driver.find_element_by_xpath(<span class="string">'//....'</span>).text()</span><br><span class="line">                </span><br><span class="line">                <span class="comment">#if expectValue==actualValue:</span></span><br><span class="line">				<span class="comment">#	print("注册username反向测试用例通过")</span></span><br><span class="line">                <span class="comment">#else:</span></span><br><span class="line">                <span class="comment">#    print("注册username反向用例不通过")</span></span><br><span class="line">                self.assertEqual(expectValue,actualValue)</span><br><span class="line">                </span><br><span class="line">                <span class="comment">#关闭浏览器对象</span></span><br><span class="line">                driver.quit()</span><br><span class="line">               </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p>电商系统/maintest.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在此文件中调度测试用例执行</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> HTMLTestRunner <span class="keyword">import</span> HTMLTestRunner</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time </span><br><span class="line"></span><br><span class="line">pathCase=os.path.dirname(__file__)+<span class="string">r"/test_cases/"</span></span><br><span class="line">pathReport=os.path.dirname(__file__)+<span class="string">r"/test_cases/"</span></span><br><span class="line"></span><br><span class="line">filename=time.strname(<span class="string">"%Y-%m-%d-%H-%M-%S"</span>) + <span class="string">r".html"</span></span><br><span class="line">filename=pathReport+filename</span><br><span class="line">discover = unittest.defaultTestLoader.discover(path,pattern=<span class="string">r"verydows*.py"</span>) 	</span><br><span class="line"><span class="keyword">with</span> open(filename,<span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">	runner=unittest.HTMLTestRunner(f,verbosity=<span class="number">2</span>,title=<span class="string">"自动化测试用例报告"</span>,description=<span class="string">"XX"</span>)</span><br><span class="line">	runner.run(discover)</span><br></pre></td></tr></table></figure><h2 id="Unittest下的数据驱动测试"><a href="#Unittest下的数据驱动测试" class="headerlink" title="Unittest下的数据驱动测试"></a>Unittest下的数据驱动测试</h2><p>数据存储</p><blockquote><p>测试脚本与测试数据分离</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613756103321.png" alt="1613756103321"></p><p>不导入ddt模块，字典只会形成一条测试用例</p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613756685341.png" alt="1613756685341"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613756748533.png" alt="1613756748533"></p><h4 id="excel"><a href="#excel" class="headerlink" title="excel"></a>excel</h4><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613756844713.png" alt="1613756844713"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613756873832.png" alt="1613756873832"></p><p>xldr</p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613757056609.png" alt="1613757056609"></p><p>excelutil.py</p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613757120441.png" alt="1613757120441" style="zoom:67%"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613757139743.png" alt="1613757139743" style="zoom:80%"></p><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn3/Unitest-framework/1613757341191.png" alt="1613757341191"></p></div><footer><p class="meta"><span class="byline author vcard">Posted by <span class="fn">Kayleh</span></span> <time datetime="2021-02-12T16:00:57.000Z" data-updated="true">Sat Feb 13 2021</time> <span class="categories"><a class="category" href="/tags/test/">test</a></span></p><div class="sharing"><a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Unitest%20framework" target="_blank" rel="noopener">Tweet</a></div><p class="meta"><a class="basic-alignment left" href="/interface-test/index.html" title="Previous Post: interface test">« interface test</a> <a class="basic-alignment right" href="/automated-test-katalon/index.html" title="Previous Post: Katalon Recorder (Selenium tests generator)">Katalon Recorder (Selenium tests generator) »</a></p></footer></article><section><h1>Comments</h1><div id="disqus_thread"></div><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript><script>var canonicalUrl="https://kayleh.top/Unitest-framework/",disqus_config=function(){this.page.url=canonicalUrl,this.page.identifier=canonicalUrl};!function(){var t=document,e=t.createElement("script");e.src="https://kayleh.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script></section></div><aside class="sidebar"><section class="odd"><h1>Recent Posts</h1><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/SQL-injection-vulnerability/">SQL injection</a></li><li class="post-list-item"><a class="post-list-link" href="/Front-end-security/">Front end security</a></li><li class="post-list-item"><a class="post-list-link" href="/What-happened-from-entering-the-URL-to-displaying-the-page/">What happened from entering the URL to displaying the page?</a></li><li class="post-list-item"><a class="post-list-link" href="/Download/">Download</a></li><li class="post-list-item"><a class="post-list-link" href="/app-test/">app test</a></li><li class="post-list-item"><a class="post-list-link" href="/interface-test/">interface test</a></li><li class="post-list-item"><a class="post-list-link" href="/Unitest-framework/">Unitest framework</a></li><li class="post-list-item"><a class="post-list-link" href="/automated-test-katalon/">Katalon Recorder (Selenium tests generator)</a></li><li class="post-list-item"><a class="post-list-link" href="/dynamic-programming/">Dynamic programming动态规划</a></li><li class="post-list-item"><a class="post-list-link" href="/automated-test-selenium/">automated test：selenium</a></li></ul></section><section class="even"><h1>GitHub Repos</h1><ul id="gh_repos"><li class="loading">Status updating&#8230;</li></ul><a href="https://github.com/kayleh" target="_blank" rel="noopener">@kayleh</a> on GitHub<script>$(document).ready(function(){
            const options = {
                user: 'kayleh',
                count: 0,
                skip_forks: true,
                target: '#gh_repos'
            }

            function escapeHtml(str) {
                return $('<div/>').text(str).html();
            }

            function render(target, repos){
                let i, fragment = '', t = $(target)[0];

                for(i = 0; i < repos.length; i++) {
                    fragment += '<li><a href="'+repos[i].html_url+'">'+repos[i].name+'</a><p>'+escapeHtml(repos[i].description||'')+'</p></li>';
                }
                t.innerHTML = fragment;
            }

            $.ajax({
                url: "https://api.github.com/users/"+options.user+"/repos?sort=pushed&callback=?",
                dataType: 'jsonp',
                error: function (err) {
                    $(options.target + ' li.loading').addClass('error').text("Error loading feed");
                },
                success: function(data) {
                    var repos = [];
                    if (!data || !data.data) { return; }
                    for (var i = 0; i < data.data.length; i++) {
                        if (options.skip_forks && data.data[i].fork) { continue; }
                        repos.push(data.data[i]);
                    }
                    if (options.count) { repos.splice(options.count); }
                    render(options.target, repos);
                }
            });
        });</script></section></aside></div></div><footer role="contentinfo"><p>Copyright © 2021 - Kayleh -</p></footer><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7457165067653912" data-ad-slot="7430854225" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></body></html>