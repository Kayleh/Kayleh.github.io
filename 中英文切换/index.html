<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Kayleh"><title>中英文切换 · Kayleh</title><meta name="description" content="hexo

感谢[陈年沉念] 的博文分享。
具体操作请参阅陈年沉念的博文 。
本文只提出几点需要特别注意的事项。
*第一, 有两个“点号” 在“/public/en” 的前面:
修改/en/_config.yml，修改内容如下：

   language: en &amp;lt;/br&amp;gt;
   roo"><meta name="keywords" content=""><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style-dark.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">Kayleh</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">活版印字</a></h1></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">대문</a></li><li><a href="/archives">아카이브</a></li><li><a href="/categories">카테고리</a></li><li><a href="/tags">태그</a></li><li><a href="/google8102e2f35ce9e391.html"></a></li><li><a href="/mainfest.json"></a></li><li><a href="/link/index.html">友人帐</a></li><li><a href="/about/index.html">about</a></li><li class="soc"><a href="https://github.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="https://twitter.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter">&nbsp;</i></a><a href="https://www.instagram.com/kayleh" target="_blank" rel="noopener noreferrer"><i class="fa fa-instagram">&nbsp;</i></a><a href="https://kayleh.top/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="https://kayleh.top" rel="noopener noreferrer">Kayleh</a></p><span>visitors:<span id="busuanzi_value_site_pv"></span></span></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>中英文切换</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2020-08-21</span><span class="meta-item"><i class="fa fa-comment-o"></i><span>&nbsp;</span><a href="/%E4%B8%AD%E8%8B%B1%E6%96%87%E5%88%87%E6%8D%A2/#comments">덧글</a></span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/front/" title="front" class="a-tag">front</a><span>&nbsp;</span></span></p><p class="post-abstract"></p><p>hexo</p><a id="more"></a><p>感谢<a href="https://chenyxmr.github.io/2016/08/04/hexo-bilingual/" target="_blank" rel="noopener">[陈年沉念]</a> 的博文分享。</p><p>具体操作请参阅<a href="https://chenyxmr.github.io/2016/08/04/hexo-bilingual/" target="_blank" rel="noopener">陈年沉念的博文</a> 。</p><p>本文只提出几点需要特别注意的事项。</p><p><em>*第一</em>, 有两个“点号” 在“/public/en” 的前面:</p><pre><code>修改/en/_config.yml，修改内容如下：

   language: en &lt;/br&gt;
   root: /en/  &lt;/br&gt;
   public_dir: ../public/en  &lt;/br&gt;
</code></pre><p><strong>第二</strong>, 也有两个“点号” 在 “commonweal:” 的前面:</p><pre><code>接下来在英文网站中添加中文入口。编辑/en/_config.yml，修改menu:中如下内容：

  commonweal: ../
</code></pre><p>顺便说一句, <a href="https://chenyxmr.github.io/2016/08/04/hexo-bilingual/" target="_blank" rel="noopener">[陈年沉念]</a>写的”/update.bat” 很方便且实用。</p><p>最后，我自己再补充一点，就是在完全Copy完Hexo网站跟目录的内容后，在新建的/en/文件夹下，node_modules文件夹里面的代码可能不能被完全复制粘贴，此时需要在/en/文件夹下运行以下代码方可顺利发布/en/到网络端：</p><p>先 鼠标右键 git bash here，然后运行</p><pre><code>npm install hexo --save
npm install

npm install hexo-generator-index --save
npm install hexo-generator-archive --save
npm install hexo-generator-category --save
npm install hexo-generator-tag --save
npm install hexo-server --save
npm install hexo-deployer-git --save
npm install hexo-deployer-heroku --save
npm install hexo-deployer-rsync --save
npm install hexo-deployer-openshift --save
npm install hexo-renderer-marked@0.2 --save
npm install hexo-renderer-stylus@0.2 --save
npm install hexo-generator-feed@1 --save
npm install hexo-generator-sitemap@1 --save
</code></pre><p>完成上述附加的必要操作后，就可以顺利推送双语或多语博客到网络端啦。</p><hr><p>转载来源： <a href="https://chenyxmr.github.io/2016/08/04/hexo-bilingual/" target="_blank" rel="noopener">https://chenyxmr.github.io/2016/08/04/hexo-bilingual/</a></p><p>前言<br>搭建个人博客时采用的hexo非常方便，但由于本人比较喜欢英语所以希望能搭建一个双语网站同步更新内容，hexo官方有提供国际化解决方案，具体参见链接<a href="https://hexo.io/zh-cn/docs/internationalization.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/internationalization.html</a> 。 但本人由于悟性比较低没有看明白这个插件应该怎么用，就索性自己用一个非常简单粗暴的方式实现了中英文双语网站。</p><p>首先，最终效果见本站。菜单栏中点击-&gt;English切换到英文网站，英文网站中点击-&gt;简体中文即切换回中文。当然每篇博文都需要自己翻译。</p><p>搭建教程<br>完整复制网站</p><p>首先，将网站根目录全部复制，然后在网站根目录下建立en/文件夹并将所复制的内容粘贴至此。此时en/文件夹下有一份完整的网站文件，也就是说这是一个独立的hexo博客。</p><p>en即为English的缩写，代表英文网站，当然也可以添加其它语言，文件夹名字随个人喜好。</p><p>更改英文网站配置</p><p>修改/en/_config.yml，修改内容如下：</p><p>language: en<br>root: /en/<br>public_dir: ../public/en</p><p>这里的public_dir代表最终生成静态文件的位置，由于最后要将英文网站静态网页跟中文静态网页放到同一根目录下，所以要进行修改。</p><p>添加语言切换入口</p><p>首先在中文网站中添加切换英文入口。语言切换入口对应网站的menu，编辑/_config.yml，修改menu:中如下内容：</p><p>commonweal: /en</p><p>这个键值对应所建立的英文网站文件夹的名称。</p><p>此处应该添加一个新的入口，但由于我的添加一直不正常所以直接将原有的公益菜单改成切换语言了~</p><p>再编辑/themes/next/languages/zh-Hans.yml，在menu:中修改如下字段：</p><p>commonweal: -&gt;English</p><p>这个键值对应切换语言选项显示的内容。</p><p>接下来在英文网站中添加中文入口。编辑/en/_config.yml，修改menu:中如下内容：</p><p>commonweal: ../</p><p>再编辑/en/themes/next/languages/en.yml，在menu:中修改如下字段：</p><p>commonweal: -&gt;简体中文</p><p>至此中英文站点即配置完成,如果英文网站需要更改细节直接更改en/下对应的文件就可以，和修改中文网站完全一样~</p><p>新建博文</p><p>每次在中文站点下新建博文并写好后，将博文复制到英文网站对应的目录下并修改成英文博文。</p><hr><p>关于Hexo的中英文语言配置，我的做法是，在菜单栏添加一个按键，通过按键切换到中/英文界面，让中文文章只显示在中文页面，英文显示在英文页面。</p><h2 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h2><p>首先，安装hexo-generator-i18n插件</p><pre><code> npm install hexo-generator-i18n --save
</code></pre><p>然后修改<em>_config.yml</em></p><pre><code>language: [zh-CN,en]# hexo-generator-i18n 选项（可选，默认使用如下设置）i18n:  type: [page, post]  generator: [index, archive, category, tag]
</code></pre><p><em>这里并没有明白tyte和generator的作用，但是似乎不影响</em></p><p>之后是<strong><em>在主题languages目录下添加对应的语言.yml文件(如zh.yml, en.yml)\</em></strong></p><p>但是由于我使用的主题并不支持多语言，我也懒得弄，所有暂时没有管这一项</p><p>插件安装完成后，执行<code>hexo clean &amp; hexo g</code></p><p>会生成<code>public/en</code>目录，对于_post内的所有博文，都会在public里存放一份，en下存放一份。</p><p>那么就需要根据页面的语言，显示不同的博文。</p><h2 id="博文配置"><a href="#博文配置" class="headerlink" title="博文配置"></a>博文配置</h2><p>对于所有的markdown文章，都需要在文章内添加属性<code>lang:zh-CN</code> or <code>lang:en</code>，来区分中英文</p><h2 id="网页配置"><a href="#网页配置" class="headerlink" title="网页配置"></a>网页配置</h2><p>我通过url来区分中英文页面，对于中文，url是<code>www.yoursite.com</code>，英文，url是<code>www.yoursite.com/en/</code>,</p><p>这样，在js中检索url是否包含en，来判断显示中文还是英文界面。</p><p><strong>修改主题</strong>, 我的主题路径是<em>themes/vexo/layout/index.ejs</em></p><p>获取当前html的路径，并判断路径内是否存在<code>en</code></p><pre><code>&lt;main class=&quot;app-body&quot;&gt;
  &lt;% var currentURL = page.path.split(&#39;/&#39;) %&gt;
  &lt;% if (currentURL.length === 1) { %&gt;
    &lt;% var lang = page.lang %&gt;
  &lt;% } else { %&gt;
    &lt;% var lang = currentURL.shift() %&gt;
  &lt;% } %&gt;
  &lt;% page.posts.each(function(post) { %&gt;
  &lt;% if (lang == post.lang) { %&gt;
    &lt;article class=&quot;article-card&quot;&gt;
      &lt;h2 class=&quot;article-head&quot;&gt;
        &lt;a href=&quot;&lt;%- url_for(post.path) %&gt;&quot;&gt;&lt;%- post.title %&gt;&lt;/a&gt;
      &lt;/h2&gt;
      &lt;p class=&quot;article-date&quot;&gt;&lt;%- date(post.date, &quot;LL&quot;) %&gt;&lt;/p&gt;
      &lt;% if (post.tags &amp;&amp; post.tags.length) { %&gt;
 [       &lt;%- partial(&#39;_partial/tag&#39;, { tags: post.tags }) %&gt;]
      &lt;% } %&gt;
      &lt;div class=&quot;article-summary&quot;&gt;
        &lt;% if (post.excerpt) { %&gt;
          &lt;%- post.excerpt %&gt;
        &lt;% } else { %&gt;
          &lt;%- truncate(strip_html(post.content), { length: 150, omission: &#39; ...&#39; }) %&gt;
        &lt;% } %&gt;
      &lt;/div&gt;
      &lt;a class=&quot;more&quot; href=&quot;&lt;%- url_for(post.path) %&gt;&quot;&gt;&lt;%- theme.excerpt_link %&gt;&lt;/a&gt;
    &lt;/article&gt;
  &lt;% } %&gt;
  &lt;% }) %&gt;

  &lt;% if (page.total &gt; 1){ %&gt;
    &lt;%- partial(&#39;_partial/pager&#39;) %&gt;
  &lt;% } %&gt;
&lt;/main&gt;
</code></pre><p>上述都完成，就可以通过<code>www.yoursite.com/en</code>进入英文网页，且该网页只有英文文章</p><h2 id="添加切换语言按钮"><a href="#添加切换语言按钮" class="headerlink" title="添加切换语言按钮"></a>添加切换语言按钮</h2><p>修改theme下的_config.yml文件, 添加一个EN的按钮，跳转到英文界面</p><pre><code>menu: Home: / Tags: /tags/ Archives: /archives/ Projects: /project/ About: /about/ EN: /en/
</code></pre><p>这里为了简单，没有动态修改EN这个按钮，提供从英文网页，跳转回中文网页的方式(实际上，点击Home按键，就跳转回中文了)</p><h2 id="部署测试"><a href="#部署测试" class="headerlink" title="部署测试"></a>部署测试</h2><pre><code>hexo clean &amp; hexo ghexo d
</code></pre><p><em>这里只配置了主页，其他页面暂时没有修改</em></p><p></p></div><div class="share"><span>공유하기</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a href="http://twitter.com/home?status=https://kayleh.top/中英文切换/%20Kayleh%20中英文切换" target="_blank" rel="noopener" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/%E6%8E%A5%E5%85%A5%E8%B0%B7%E6%AD%8C%E5%B9%BF%E5%91%8A%E8%81%94%E7%9B%9FAdsense/" title="Traffic monetization:Access to Google Adsense"><i class="fa fa-angle-double-left"></i>&nbsp;이전 포스트: Traffic monetization:Access to Google Adsense</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/%E5%85%B3%E4%BA%8ECDN%E5%8A%A0%E9%80%9F%E7%BC%93%E5%AD%98%E4%B8%8D%E5%88%B7%E6%96%B0%E7%9A%84%E8%A7%A3%E5%86%B3/" title="jsdelivr的CDN加速缓存不刷新问题">다음 포스트: jsdelivr的CDN加速缓存不刷新问题&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname="kayleh",disqus_identifier="中英文切换/",disqus_title="中英文切换",disqus_url="https://kayleh.top/中英文切换/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script id="dsq-count-scr" src="//kayleh.disqus.com/count.js" async></script></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="https://kayleh.top" rel="noopener noreferrer">Kayleh</a></p><span>visitors:<span id="busuanzi_value_site_pv"></span></span></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script><script src="/js/dao.js"></script><script src="https://cdn.jsdelivr.net/gh/kayleh/cdn2/busuanzi/busuanzi.pure.mini.js"></script><script data-ad-client="ca-pub-7457165067653912" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></body></html>